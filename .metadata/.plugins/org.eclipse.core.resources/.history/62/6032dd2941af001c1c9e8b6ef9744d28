<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
    // 로그인창에 진입했을때, login_id 라는 명칭으로 발급된 쿠키가 없을 경우
    // cookie_login.jsp로 리다이렉트 시켜서 로그인 안 한 사람의 접근을 원천차단.
    // 전체 쿠키목록 얻어오기
    Cookie[] cookies = request.getCookies(); // cookie_check.jsp 의 로직을 참고하셔도 됩니다.
    
    // 쿠키 목록을 반복문으로 돌려서, "login_id" 라는 명칭의 쿠키가 없다면
    // cookie_login.jsp로 리다이렉트 시키고, 있을때만 아무 행동을 하지 않는
    // 구문을 작성해주세요.
    String str = null;
    
    boolean flag = false;
    
    for(int i = 0; i < cookies.length; i++){
    	str = cookies[i].getName();
    	if(!str.equals("login_id")){
    		response.sendRedirect("http://localhost:8181/JSPbasic/jspobject/cookie/cookie_login.jsp");
    		flag = true; // 땅콩쿠키 존재
    		break; // 땅콩 검출된 즉시 반복문 종료로 메모리 절약
    	} 
    }
    
    // flag가 true로 바뀌었다는건 땅콩쿠기가 존재한다는것.
    // 바꿔 말하면 바뀌지 않았다는것은 땅콩쿠키가 없다는것
    if(!flag){
    	 out.println("땅콩쿠키가 없어졌습니다.<br/>");
    }
%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
   <h1>로그인하셨습니다. 환영합니다.</h1>
   <a href="http://localhost:8181/JSPbasic/jspobject/cookie/cookie_login.jsp">로그아웃</a>
</body>
</html>